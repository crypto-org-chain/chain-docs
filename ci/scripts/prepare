#!/usr/bin/env bash
set -e

if [ "${EVENT}" == "push" ]
then
  BRANCH="MASTER"
elif [ "${EVENT}" == "issue_comment" ]
then
  BRANCH="STAGING"
fi

BRANCH_AWS_ACCESS_KEY_ID=${BRANCH}_AWS_ACCESS_KEY_ID
BRANCH_AWS_SECRET_ACCESS_KEY=${BRANCH}_AWS_SECRET_ACCESS_KEY
BRANCH_BUCKET_NAME=${BRANCH}_BUCKET_NAME
BRANCH_CLOUDFRONT_DISTRIBUTION_ID=${BRANCH}_CLOUDFRONT_DISTRIBUTION_ID
BRANCH_REGION=${BRANCH}_REGION
aws configure set aws_access_key_id ${!BRANCH_AWS_ACCESS_KEY_ID}
aws configure set aws_secret_access_key ${!BRANCH_AWS_SECRET_ACCESS_KEY}
aws configure set region us-east-1

export S3_BUCKET=${!BRANCH_BUCKET_NAME}
export CLOUDFRONT_DISTRIBUTION_ID=${!BRANCH_CLOUDFRONT_DISTRIBUTION_ID}
export REGION=${!BRANCH_REGION}
